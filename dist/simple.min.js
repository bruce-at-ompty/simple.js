!function(t){"use strict"
String.prototype.hashCode=function(){var t,e,a,i=0
if(0===this.length)return i
for(t=0,a=this.length;a>t;t++)e=this.charCodeAt(t),i=(i<<5)-i+e,i|=0
return Math.abs(i)}
var e=function(t){return JSON.stringify(t)},a=function(t){return JSON.parse(JSON.stringify(t))},i=function(i,s){i=e(i).hashCode()
var n="__ss_app_"+i
if(this.name=i,t[n]=this,this.localStorageKey=n+"_data",this.container=null,this.state={},this.pState={},this.cnf={localStorageWrite:!0,localStorageRead:!0,partialRender:!0},this.callback={getElementStyle:{},renderElement:{},parseElementData:{},stateIsUpdated:{}},"object"==typeof s)for(var r in s)this.cnf[r]=s[r]
this.updateState=function(t,e){var a,i,s
if("string"==typeof t)a=t,i=e,this.state[t]=e
else if("object"==typeof t&&"string"==typeof t.nodeName){s=t
var n=s.nodeName,r=s.type
switch("SELECT"==n&&(r="select"),a=s.name,i=s.value,r){case"select":case"text":case"radio":this.state[a]=i
break
case"checkbox":if(this.state[a]||(this.state[a]=[]),s.checked&&i.length>0)this.state[a].indexOf(i)<0&&this.state[a].push(i)
else{var h=this.state[a].indexOf(i)
h>=0&&this.state[a].splice(h,1)}break
default:this.state[a]=i}}this.store(),this.stateIsUpdated({name:a,value:i,element:s,state:this.state})},this.stateIsUpdated=function(t){return"function"==typeof this.callback.stateIsUpdated[t.name]?(this.callback.stateIsUpdated[t.name],a(t)):t},this.htmlTemplate=function(t,e){try{var a=t
for(var i in e){var s=new RegExp("{"+i+"}","g"),n=e[i]
a=a.replace(s,n)}return a}catch(r){return""}},this.store=function(){this.cnf.localStorageWrite&&"object"==typeof window.localStorage&&window.localStorage.setItem(this.localStorageKey,e(this.state))},this.load=function(){if(this.cnf.localStorageRead&&"object"==typeof window.localStorage){var t=window.localStorage.getItem(this.localStorageKey)
if(!t)return
try{this.state=JSON.parse(t)}catch(e){}}},this.template={main:{},sub:{}},this.data={main:{},sub:{}},this.pData={main:{},sub:{}},this.getElementStyle=function(t,i,s){if("function"==typeof this.callback.getElementStyle[t])return this.callback.getElementStyle[t],a(i,s)
if(i){var n=e(i),r=e(s.value)
return n.indexOf(r)>=0?"selected":"default"}return"default"},this.parseElementData=function(t,e,i){return"function"==typeof this.callback.parseElementData[t]?(this.callback.parseElementData[t],a(e,i)):i},this.style="default",this.render=function(){if(this.willRender(),!this.container)throw new Error("Invalid container specified")
var t=this.style,i=this.template.main[t],s=this.data.main
if(!i)throw new Error("Invalid master template for style: "+t)
var r=!1
for(var h in this.template.sub)this.cnf.partialRender&&e(this.state[h])==e(this.pState[h])&&"string"==typeof s[h]&&e(this.data.sub[h])==e(this.pData.sub[h])||(s[h]=this.renderElement(h),r=!0);(r||e(this.data)!=e(this.pData))&&(s.__s=n+".updateState",this.container.innerHTML=this.htmlTemplate(i,s),this.pState=a(this.state),this.pData=a(this.data),this.didRender())},this.renderElement=function(t){if("object"!=typeof this.template.sub[t])return""
var e=this.data.sub[t]||{},i=this.state[t]||""
if("function"==typeof this.callback.renderElement[t])return this.callback.renderElement[t],a(i,e)
var s="",r=this
return e.map(function(e){var h=a(e),l=r.getElementStyle(t,i,h),o=r.template.sub[t][l],c=r.parseElementData(t,i,h)
c.__s=n+".updateState",c.name=t,c.value||(c.value=i?i:""),o||(o=r.template.sub[t]["default"]),s+=r.htmlTemplate(o,c)}),s},this.init=function(t,e){t&&(this.container=t),this.load(),e!==!1&&(this.appStart(),this.render(),this.appFinish())},this.appStart=function(){},this.appFinish=function(){},this.willRender=function(){},this.didRender=function(){},this.toQuerystring=function(){var t=[]
for(var e in this.state){var a=this.state[e]
a&&t.push(e+"="+a)}return t.join("&")}},s={}
t.SimpleApp=function(t,e){return s[t]||(s[t]=new i(t,e)),s[t]},t.SimpleEvent={c:{},listen:function(t,e){this.c[t]=this.c[t]||[],this.c[t].push(e)},emit:function(t,e){if(this.c[t]&&this.c[t].length>0)for(var a in this.c[t]){var i=this.c[t][a]
try{i(e)}catch(s){}}}},"undefined"!=typeof exports&&(exports.SimpleApp=t.SimpleApp,exports.SimpleEvent=t.SimpleEvent)}(this)
