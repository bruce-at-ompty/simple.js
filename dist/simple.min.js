!function(t){"use strict"
t.SimpleEvent={c:{},listen:function(t,e){this.c[t]=this.c[t]||[],this.c[t].push(e)},emit:function(t,e){if(this.c[t]&&this.c[t].length>0)for(var i in this.c[t]){var a=this.c[t][i]
try{a(e)}catch(s){}}}},"undefined"!=typeof exports&&(exports.SimpleEvent=t.SimpleEvent)}(this),function(t){"use strict"
String.prototype.hashCode=function(){var t,e,i,a=0
if(0===this.length)return a
for(t=0,i=this.length;i>t;t++)e=this.charCodeAt(t),a=(a<<5)-a+e,a|=0
return a}
var e=function(e,i){e=JSON.stringify(e).hashCode()
var a="__ss_app_"+e
if(this.name=e,t[a]=this,this.localStorageKey=a+"_data",this.container=null,this.state={},this.pState={},this.cnf={localStorageWrite:!0,localStorageRead:!0,partialRender:!0},this.callback={getElementStyle:{},renderElement:{},parseElementData:{},stateIsUpdated:{}},"object"==typeof i)for(var s in i)this.cnf[s]=i[s]
this.updateState=function(t,e){var i,a,s
if("string"==typeof t)i=t,a=e,this.state[t]=e
else if("object"==typeof t&&"string"==typeof t.nodeName){var n=t,r=n.nodeName,l=n.type
switch("SELECT"==r&&(l="select"),i=n.name,a=n.value,l){case"select":case"text":case"radio":this.state[i]=a
break
case"checkbox":if(this.state[i]||(this.state[i]=[]),n.checked&&a.length>0)this.state[i].indexOf(a)<0&&this.state[i].push(a)
else{var h=this.state[i].indexOf(a)
h>=0&&this.state[i].splice(h,1)}break
default:this.state[i]=a}}this.store(),this.stateIsUpdated({name:i,value:a,element:s,state:this.state})},this.stateIsUpdated=function(t){if("function"==typeof this.callback.stateIsUpdated[t.name]){var e=this.callback.stateIsUpdated[t.name]
return e(t)}return t},this.htmlTemplate=function(t,e){var i=t
for(var a in e){var s=new RegExp(":"+a,"g"),n=e[a]
i=i.replace(s,n)}return i},this.store=function(){this.cnf.localStorageWrite&&"object"==typeof window.localStorage&&window.localStorage.setItem(this.localStorageKey,JSON.stringify(this.state))},this.load=function(){if(this.cnf.localStorageRead&&"object"==typeof window.localStorage){var t=window.localStorage.getItem(this.localStorageKey)
if(!t)return
try{this.state=JSON.parse(t)}catch(e){}}},this.elements={data:{main:{},sub:{}},template:{main:{"default":""},sub:{}}},this.getElementStyle=function(t,e,i){if("function"==typeof this.callback.getElementStyle[t]){var a=this.callback.getElementStyle[t]
return a(e,i)}if(e){var s=JSON.stringify(e),n=JSON.stringify(i.value)
return s.indexOf(n)>=0?"selected":"default"}return"default"},this.parseElementData=function(t,e,i){if("function"==typeof this.callback.parseElementData[t]){var a=this.callback.parseElementData[t]
return a(e,i)}return i},this.style="default",this.render=function(){if(this.willRender(),!this.container)throw new Error("Invalid container specified")
var t=this.style,e=this.elements.template.main[t],i=this.elements.data.main
if(!e)throw new Error("Invalid master template for style: "+t)
for(var a in this.elements.template.sub)i[a]=this.renderElement(a)
this.container.innerHTML=this.htmlTemplate(e,i),this.pState=JSON.parse(JSON.stringify(this.state)),this.didRender()},this.renderElement=function(t){if("object"!=typeof this.elements.template.sub[t])return""
var e=this.elements.data.sub[t]||{},i=this.state[t]||""
if("function"==typeof this.callback.renderElement[t]){var s=this.callback.renderElement[t]
return s(i,e)}var n="",r=this
return e.map(function(e){var s=JSON.parse(JSON.stringify(e)),l=r.getElementStyle(t,i,s),h=r.elements.template.sub[t][l],o=r.parseElementData(t,i,s)
o.__call=a+".updateState",o.name=t,o.value||(o.value=i?i:""),h||(h=r.elements.template.sub[t]["default"]),n+=r.htmlTemplate(h,o)}),n},this.init=function(t,e){t&&(this.container=t),this.load(),e!==!1&&(this.appStart(),this.render(),this.appFinish())},this.appStart=function(){},this.appFinish=function(){},this.willRender=function(){},this.didRender=function(){},this.toQuerystring=function(){var t=[]
for(var e in this.state){var i=this.state[e]
i&&t.push(e+"="+i)}return t.join("&")}}
t.SimpleApp=e,"undefined"!=typeof exports&&(exports.SimpleApp=e)}(this),function(t){"use strict"
t.SimpleAppManager={apps:{},create:function(t,e){var i
return"object"==typeof this.apps[t]?i=this.apps[t]:(i=new SimpleApp(t,e),this.apps[t]=i),i},getAppByName:function(t){return this.apps[t]||new SimpleApp(t)}},"undefined"!=typeof exports&&(exports.SimpleAppManager=t.SimpleAppManager)}(this)
